'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = validateArguments;

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var optionsValidation = {
  expectedType: 'object or function',
  predicate: function predicate(_ref) {
    var options = _ref.options;

    return _lodash2.default.isPlainObject(options);
  }
};

var optionsTimeoutValidation = {
  identifier: '"options.timeout"',
  expectedType: 'integer',
  predicate: function predicate(_ref2) {
    var options = _ref2.options;

    return !options.timeout || _lodash2.default.isInteger(options.timeout);
  }
};

var fnValidation = {
  expectedType: 'function',
  predicate: function predicate(_ref3) {
    var code = _ref3.code;

    return _lodash2.default.isFunction(code);
  }
};

var validations = {
  defineHook: [_lodash2.default.assign({ identifier: 'first argument' }, optionsValidation), {
    identifier: '"options.tags"',
    expectedType: 'string',
    predicate: function predicate(_ref4) {
      var options = _ref4.options;

      return !options.tags || _lodash2.default.isString(options.tags);
    }
  }, optionsTimeoutValidation, _lodash2.default.assign({ identifier: 'second argument' }, fnValidation)],
  defineStep: [{
    identifier: 'first argument',
    expectedType: 'string or regular expression',
    predicate: function predicate(_ref5) {
      var pattern = _ref5.pattern;

      return _lodash2.default.isRegExp(pattern) || _lodash2.default.isString(pattern);
    }
  }, _lodash2.default.assign({ identifier: 'second argument' }, optionsValidation), optionsTimeoutValidation, _lodash2.default.assign({ identifier: 'third argument' }, fnValidation)],
  registerHandler: [{
    identifier: 'first argument',
    expectedType: 'string',
    predicate: function predicate(_ref6) {
      var eventName = _ref6.eventName;

      return _lodash2.default.isString(eventName);
    }
  }, _lodash2.default.assign({ identifier: 'second argument' }, optionsValidation), optionsTimeoutValidation, _lodash2.default.assign({ identifier: 'third argument' }, fnValidation)]
};

function validateArguments(_ref7) {
  var args = _ref7.args,
      fnName = _ref7.fnName,
      location = _ref7.location;

  validations[fnName].forEach(function (_ref8) {
    var identifier = _ref8.identifier,
        expectedType = _ref8.expectedType,
        predicate = _ref8.predicate;

    if (!predicate(args)) {
      throw new Error(location + ': Invalid ' + identifier + ': should be a ' + expectedType);
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdXBwb3J0X2NvZGVfbGlicmFyeS92YWxpZGF0ZV9hcmd1bWVudHMuanMiXSwibmFtZXMiOlsidmFsaWRhdGVBcmd1bWVudHMiLCJvcHRpb25zVmFsaWRhdGlvbiIsImV4cGVjdGVkVHlwZSIsInByZWRpY2F0ZSIsIm9wdGlvbnMiLCJpc1BsYWluT2JqZWN0Iiwib3B0aW9uc1RpbWVvdXRWYWxpZGF0aW9uIiwiaWRlbnRpZmllciIsInRpbWVvdXQiLCJpc0ludGVnZXIiLCJmblZhbGlkYXRpb24iLCJjb2RlIiwiaXNGdW5jdGlvbiIsInZhbGlkYXRpb25zIiwiZGVmaW5lSG9vayIsImFzc2lnbiIsInRhZ3MiLCJpc1N0cmluZyIsImRlZmluZVN0ZXAiLCJwYXR0ZXJuIiwiaXNSZWdFeHAiLCJyZWdpc3RlckhhbmRsZXIiLCJldmVudE5hbWUiLCJhcmdzIiwiZm5OYW1lIiwibG9jYXRpb24iLCJmb3JFYWNoIiwiRXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7O2tCQStEd0JBLGlCOztBQS9EeEI7Ozs7OztBQUVBLElBQU1DLG9CQUFvQjtBQUN4QkMsZ0JBQWMsb0JBRFU7QUFFeEJDLFdBRndCLDJCQUVEO0FBQUEsUUFBWEMsT0FBVyxRQUFYQSxPQUFXOztBQUNyQixXQUFPLGlCQUFFQyxhQUFGLENBQWdCRCxPQUFoQixDQUFQO0FBQ0Q7QUFKdUIsQ0FBMUI7O0FBT0EsSUFBTUUsMkJBQTJCO0FBQy9CQyxjQUFZLG1CQURtQjtBQUUvQkwsZ0JBQWMsU0FGaUI7QUFHL0JDLFdBSCtCLDRCQUdSO0FBQUEsUUFBWEMsT0FBVyxTQUFYQSxPQUFXOztBQUNyQixXQUFPLENBQUNBLFFBQVFJLE9BQVQsSUFBb0IsaUJBQUVDLFNBQUYsQ0FBWUwsUUFBUUksT0FBcEIsQ0FBM0I7QUFDRDtBQUw4QixDQUFqQzs7QUFRQSxJQUFNRSxlQUFlO0FBQ25CUixnQkFBYyxVQURLO0FBRW5CQyxXQUZtQiw0QkFFQztBQUFBLFFBQVJRLElBQVEsU0FBUkEsSUFBUTs7QUFDbEIsV0FBTyxpQkFBRUMsVUFBRixDQUFhRCxJQUFiLENBQVA7QUFDRDtBQUprQixDQUFyQjs7QUFPQSxJQUFNRSxjQUFjO0FBQ2xCQyxjQUFZLENBQ1YsaUJBQUVDLE1BQUYsQ0FBUyxFQUFFUixZQUFZLGdCQUFkLEVBQVQsRUFBMkNOLGlCQUEzQyxDQURVLEVBRVY7QUFDRU0sZ0JBQVksZ0JBRGQ7QUFFRUwsa0JBQWMsUUFGaEI7QUFHRUMsYUFIRiw0QkFHeUI7QUFBQSxVQUFYQyxPQUFXLFNBQVhBLE9BQVc7O0FBQ3JCLGFBQU8sQ0FBQ0EsUUFBUVksSUFBVCxJQUFpQixpQkFBRUMsUUFBRixDQUFXYixRQUFRWSxJQUFuQixDQUF4QjtBQUNEO0FBTEgsR0FGVSxFQVNWVix3QkFUVSxFQVVWLGlCQUFFUyxNQUFGLENBQVMsRUFBRVIsWUFBWSxpQkFBZCxFQUFULEVBQTRDRyxZQUE1QyxDQVZVLENBRE07QUFhbEJRLGNBQVksQ0FDVjtBQUNFWCxnQkFBWSxnQkFEZDtBQUVFTCxrQkFBYyw4QkFGaEI7QUFHRUMsYUFIRiw0QkFHeUI7QUFBQSxVQUFYZ0IsT0FBVyxTQUFYQSxPQUFXOztBQUNyQixhQUFPLGlCQUFFQyxRQUFGLENBQVdELE9BQVgsS0FBdUIsaUJBQUVGLFFBQUYsQ0FBV0UsT0FBWCxDQUE5QjtBQUNEO0FBTEgsR0FEVSxFQVFWLGlCQUFFSixNQUFGLENBQVMsRUFBRVIsWUFBWSxpQkFBZCxFQUFULEVBQTRDTixpQkFBNUMsQ0FSVSxFQVNWSyx3QkFUVSxFQVVWLGlCQUFFUyxNQUFGLENBQVMsRUFBRVIsWUFBWSxnQkFBZCxFQUFULEVBQTJDRyxZQUEzQyxDQVZVLENBYk07QUF5QmxCVyxtQkFBaUIsQ0FDZjtBQUNFZCxnQkFBWSxnQkFEZDtBQUVFTCxrQkFBYyxRQUZoQjtBQUdFQyxhQUhGLDRCQUcyQjtBQUFBLFVBQWJtQixTQUFhLFNBQWJBLFNBQWE7O0FBQ3ZCLGFBQU8saUJBQUVMLFFBQUYsQ0FBV0ssU0FBWCxDQUFQO0FBQ0Q7QUFMSCxHQURlLEVBUWYsaUJBQUVQLE1BQUYsQ0FBUyxFQUFFUixZQUFZLGlCQUFkLEVBQVQsRUFBNENOLGlCQUE1QyxDQVJlLEVBU2ZLLHdCQVRlLEVBVWYsaUJBQUVTLE1BQUYsQ0FBUyxFQUFFUixZQUFZLGdCQUFkLEVBQVQsRUFBMkNHLFlBQTNDLENBVmU7QUF6QkMsQ0FBcEI7O0FBdUNlLFNBQVNWLGlCQUFULFFBQXVEO0FBQUEsTUFBMUJ1QixJQUEwQixTQUExQkEsSUFBMEI7QUFBQSxNQUFwQkMsTUFBb0IsU0FBcEJBLE1BQW9CO0FBQUEsTUFBWkMsUUFBWSxTQUFaQSxRQUFZOztBQUNwRVosY0FBWVcsTUFBWixFQUFvQkUsT0FBcEIsQ0FBNEIsaUJBQTZDO0FBQUEsUUFBMUNuQixVQUEwQyxTQUExQ0EsVUFBMEM7QUFBQSxRQUE5QkwsWUFBOEIsU0FBOUJBLFlBQThCO0FBQUEsUUFBaEJDLFNBQWdCLFNBQWhCQSxTQUFnQjs7QUFDdkUsUUFBSSxDQUFDQSxVQUFVb0IsSUFBVixDQUFMLEVBQXNCO0FBQ3BCLFlBQU0sSUFBSUksS0FBSixDQUNERixRQURDLGtCQUNvQmxCLFVBRHBCLHNCQUMrQ0wsWUFEL0MsQ0FBTjtBQUdEO0FBQ0YsR0FORDtBQU9EIiwiZmlsZSI6InZhbGlkYXRlX2FyZ3VtZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCdcblxuY29uc3Qgb3B0aW9uc1ZhbGlkYXRpb24gPSB7XG4gIGV4cGVjdGVkVHlwZTogJ29iamVjdCBvciBmdW5jdGlvbicsXG4gIHByZWRpY2F0ZSh7IG9wdGlvbnMgfSkge1xuICAgIHJldHVybiBfLmlzUGxhaW5PYmplY3Qob3B0aW9ucylcbiAgfVxufVxuXG5jb25zdCBvcHRpb25zVGltZW91dFZhbGlkYXRpb24gPSB7XG4gIGlkZW50aWZpZXI6ICdcIm9wdGlvbnMudGltZW91dFwiJyxcbiAgZXhwZWN0ZWRUeXBlOiAnaW50ZWdlcicsXG4gIHByZWRpY2F0ZSh7IG9wdGlvbnMgfSkge1xuICAgIHJldHVybiAhb3B0aW9ucy50aW1lb3V0IHx8IF8uaXNJbnRlZ2VyKG9wdGlvbnMudGltZW91dClcbiAgfVxufVxuXG5jb25zdCBmblZhbGlkYXRpb24gPSB7XG4gIGV4cGVjdGVkVHlwZTogJ2Z1bmN0aW9uJyxcbiAgcHJlZGljYXRlKHsgY29kZSB9KSB7XG4gICAgcmV0dXJuIF8uaXNGdW5jdGlvbihjb2RlKVxuICB9XG59XG5cbmNvbnN0IHZhbGlkYXRpb25zID0ge1xuICBkZWZpbmVIb29rOiBbXG4gICAgXy5hc3NpZ24oeyBpZGVudGlmaWVyOiAnZmlyc3QgYXJndW1lbnQnIH0sIG9wdGlvbnNWYWxpZGF0aW9uKSxcbiAgICB7XG4gICAgICBpZGVudGlmaWVyOiAnXCJvcHRpb25zLnRhZ3NcIicsXG4gICAgICBleHBlY3RlZFR5cGU6ICdzdHJpbmcnLFxuICAgICAgcHJlZGljYXRlKHsgb3B0aW9ucyB9KSB7XG4gICAgICAgIHJldHVybiAhb3B0aW9ucy50YWdzIHx8IF8uaXNTdHJpbmcob3B0aW9ucy50YWdzKVxuICAgICAgfVxuICAgIH0sXG4gICAgb3B0aW9uc1RpbWVvdXRWYWxpZGF0aW9uLFxuICAgIF8uYXNzaWduKHsgaWRlbnRpZmllcjogJ3NlY29uZCBhcmd1bWVudCcgfSwgZm5WYWxpZGF0aW9uKVxuICBdLFxuICBkZWZpbmVTdGVwOiBbXG4gICAge1xuICAgICAgaWRlbnRpZmllcjogJ2ZpcnN0IGFyZ3VtZW50JyxcbiAgICAgIGV4cGVjdGVkVHlwZTogJ3N0cmluZyBvciByZWd1bGFyIGV4cHJlc3Npb24nLFxuICAgICAgcHJlZGljYXRlKHsgcGF0dGVybiB9KSB7XG4gICAgICAgIHJldHVybiBfLmlzUmVnRXhwKHBhdHRlcm4pIHx8IF8uaXNTdHJpbmcocGF0dGVybilcbiAgICAgIH1cbiAgICB9LFxuICAgIF8uYXNzaWduKHsgaWRlbnRpZmllcjogJ3NlY29uZCBhcmd1bWVudCcgfSwgb3B0aW9uc1ZhbGlkYXRpb24pLFxuICAgIG9wdGlvbnNUaW1lb3V0VmFsaWRhdGlvbixcbiAgICBfLmFzc2lnbih7IGlkZW50aWZpZXI6ICd0aGlyZCBhcmd1bWVudCcgfSwgZm5WYWxpZGF0aW9uKVxuICBdLFxuICByZWdpc3RlckhhbmRsZXI6IFtcbiAgICB7XG4gICAgICBpZGVudGlmaWVyOiAnZmlyc3QgYXJndW1lbnQnLFxuICAgICAgZXhwZWN0ZWRUeXBlOiAnc3RyaW5nJyxcbiAgICAgIHByZWRpY2F0ZSh7IGV2ZW50TmFtZSB9KSB7XG4gICAgICAgIHJldHVybiBfLmlzU3RyaW5nKGV2ZW50TmFtZSlcbiAgICAgIH1cbiAgICB9LFxuICAgIF8uYXNzaWduKHsgaWRlbnRpZmllcjogJ3NlY29uZCBhcmd1bWVudCcgfSwgb3B0aW9uc1ZhbGlkYXRpb24pLFxuICAgIG9wdGlvbnNUaW1lb3V0VmFsaWRhdGlvbixcbiAgICBfLmFzc2lnbih7IGlkZW50aWZpZXI6ICd0aGlyZCBhcmd1bWVudCcgfSwgZm5WYWxpZGF0aW9uKVxuICBdXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHZhbGlkYXRlQXJndW1lbnRzKHsgYXJncywgZm5OYW1lLCBsb2NhdGlvbiB9KSB7XG4gIHZhbGlkYXRpb25zW2ZuTmFtZV0uZm9yRWFjaCgoeyBpZGVudGlmaWVyLCBleHBlY3RlZFR5cGUsIHByZWRpY2F0ZSB9KSA9PiB7XG4gICAgaWYgKCFwcmVkaWNhdGUoYXJncykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYCR7bG9jYXRpb259OiBJbnZhbGlkICR7aWRlbnRpZmllcn06IHNob3VsZCBiZSBhICR7ZXhwZWN0ZWRUeXBlfWBcbiAgICAgIClcbiAgICB9XG4gIH0pXG59XG4iXX0=